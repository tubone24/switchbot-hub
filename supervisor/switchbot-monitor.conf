[program:switchbot-monitor]
; SwitchBot Device Monitor Service
; Copy this file to /etc/supervisor/conf.d/

; Command to run (adjust paths as needed)
command=/usr/bin/python3 /home/pi/switchbot-hub/main.py /home/pi/switchbot-hub/config.json

; Working directory
directory=/home/pi/switchbot-hub

; Run as pi user (not root)
user=pi

; Auto-start and restart settings
autostart=true
autorestart=true
startsecs=10
startretries=3

; Stop signal (graceful shutdown)
stopsignal=TERM
stopwaitsecs=10

; Logging
stdout_logfile=/var/log/switchbot-monitor.log
stdout_logfile_maxbytes=10MB
stdout_logfile_backups=3
stderr_logfile=/var/log/switchbot-monitor-error.log
stderr_logfile_maxbytes=10MB
stderr_logfile_backups=3

; Redirect stderr to stdout (optional, uncomment to combine logs)
; redirect_stderr=true

; Environment variables (optional)
; environment=PYTHONUNBUFFERED="1"
